<!DOCTYPE html>
<html lang="en">

<head>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-146581885-1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];

		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());

		gtag('config', 'UA-146581885-1');
	</script>
	<title>Moving From Ruby To PHP | Eric Chrobak</title>
	<meta charset="utf-8">
	<meta name="author" content="Eric Chrobak">
	<meta name="google-site-verification" content="mlSH_0PUjKe4Vjt1l5LJBdkVBq2rtdxkN0A2gV92NU4" />
	<meta name="description" content="Eric Chrobak is a software engineer. Skills include Ruby, Rails, HTML, CSS, and JavaScript.">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!--Fonts-->
	<link href='https://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>
	<link href='https://fonts.googleapis.com/css?family=Pacifico' rel='stylesheet' type='text/css'>
	<!--CSS-->
	<link rel="shortcut icon" type="image/icon" href="/jpg/webfavicon.png">
	<link rel="icon" type="image/icon" href="/jpg/webfavicon.png">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="/css/scrolling-nav.css">
	<!-- custom style -->
	<link rel="stylesheet" href="/css/style.css">
	<link rel="stylesheet" type="text/css" href="/css/responsive.css">
	<style type="text/css"></style>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
	<script src="/javascript/jquery.easing.min.js"></script>
	<script src="/javascript/scroll-down.js"></script>
	<script src="/javascript/script.js"></script>
	<script src="/javascript/scrolling-nav.js"></script>
</head>


<body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top">

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-fixed-top smart-scroll" role="navigation">
    <div class="container-fluid">

        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false" aria-controls="bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand page-scroll" id="name" href="#page-top">EC</a>
        </div>


        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="page-scroll active" href="http://localhost:4000/">Home</a>
                </li>
                
                <li>
                    <a class="page-scroll" href="http://localhost:4000/about.html">About</a>
                </li>
                
                <li>
                    <a class="page-scroll" href="http://localhost:4000/blog.html">Blog</a>
                </li>
                

            </ul>
        </div>

    </div>
</nav>


	<div class="post">
    <div class="container-fluid">
        <h1>Moving From Ruby To PHP</h1>
        <p id="date">23 Aug 2023 - Eric Chrobak</p>
        <p><br />
At my <a href="https://www.vaspian.com">9-5</a> we provide a variety of telecom services to our clients and use <a href="https://www.zoho.com/one/">Zoho One</a> as our ERP. We have a texting platform that sends out mass text messages on behalf of our clients. However, they need the phone numbers verified before sending the sms blast out. We provide a service that scrubs the list of invalid phone numbers. When that is completed it sends an email to our <a href="https://www.zoho.com/crm/">CRM</a> to generate an invoice. The crm parses the email to generate the invoice. We needed to move away from the email parser due to it’s instability.<br /><br /></p>

<h2 id="its-2023-why-in-the-world-am-i-programming-in-php"><strong>It’s 2023! Why in the world am I programming in PHP?</strong></h2>
<p><br />
It turns out a lot of companies have applications besides their WordPress website built with <a href="https://www.php.net/">PHP</a>. The application in questions is a PHP application. We decided to add a class to the existing PHP scrubbing application. This would authenticate with Zoho CRM and send the scrubbing data over via a POST request. I previously developed a Ruby application on AWS Lambda for a different use case. This Ruby application authenticated with Zoho CRM and made a POST request. We decided to change the syntax of the code to work in PHP. <br /><br /></p>

<h2 id="how-i-built-it-in-php"><strong>How I built it in PHP</strong></h2>
<p><br />
I wasn’t as familiar with OOP in PHP so I spent some time learning on <a href="https://www.php.net/manual/en/index.php">PHP-Manual</a>. The main differences were syntax and the necessary libraries. In the Ruby application I had <a href="https://rubygems.org/">Ruby gems</a> for the following functionality:</p>
<ul>
  <li>HTTP requests - <a href="https://lostisland.github.io/faraday/#/">Faraday</a></li>
  <li>Logging - <a href="https://ruby-doc.org/stdlib-2.4.0/libdoc/logger/rdoc/Logger.html">Logger</a>
<br /><br /></li>
</ul>

<p>The PHP standard for HTTP request is <a href="https://www.php.net/manual/en/book.curl.php">cUrl</a>, which is what I am using. I created a function just for the cUrl call which would be used for authentication and the POST.
<br /><br />
I also adjusted the syntax and variable declarations to ensure the code worked. After adding test data, the application authenticated and made a succesful POST call to Zoho CRM. I removed the class features to have the code be part of a copy and paste into the application. 
<br /><br /></p>

<h2 id="whats-next"><strong>What’s Next</strong></h2>
<p><br />
I realized after removing the class functionality that the code is no longer modular or extensible to the existing application. So I will need to adjust the code to be a class once again. Then I will instantiate the class in the existing application. When the class is instantiated it will authenticate with Zoho. Then we can make a call.</p>

<p>Example code:</p>
<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Main application</span>
<span class="nv">$crm_payload</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"key1"</span><span class="o">=&gt;</span><span class="s2">"value1"</span><span class="p">,</span>
    <span class="s2">"key2"</span><span class="o">=&gt;</span><span class="s2">"value2"</span>
<span class="p">];</span>
<span class="nv">$zoho_api</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">zohoCRM</span><span class="p">()</span>
<span class="nv">$zoho_api</span><span class="o">-&gt;</span><span class="nf">crm_post</span><span class="p">(</span><span class="s2">"module_name"</span><span class="p">,</span><span class="s2">"Upsert"</span><span class="p">,</span><span class="nv">$crm_payload</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">ZohoCRM</span>
<span class="p">{</span>
    <span class="k">var</span> <span class="nv">$headers</span><span class="p">;</span>
    <span class="k">var</span> <span class="nv">$crm_base_api_url</span> <span class="o">=</span> <span class="s2">"https://www.zohoapis.com/crm/v3/"</span><span class="p">;</span>

    <span class="k">function</span> <span class="n">initialize</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">=&gt;</span><span class="nf">authenticate</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="k">function</span> <span class="n">authenticate</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$headers</span><span class="p">[</span><span class="s2">"client_secret"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"client_secret"</span><span class="p">;</span>
        <span class="nv">$auth_url</span> <span class="o">=</span> <span class="s2">"somezoho url"</span><span class="p">;</span>
        <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">=&gt;</span><span class="nf">crm_post</span><span class="p">(</span><span class="nv">$auth_url</span><span class="p">);</span>
        <span class="nv">$headers</span><span class="p">[</span><span class="s2">"Authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Oauth "</span> <span class="mf">.</span> <span class="nv">$response</span><span class="p">[</span><span class="s2">"token"</span><span class="p">];</span>
    <span class="p">}</span>

    <span class="k">function</span> <span class="n">crm_post</span><span class="p">(</span><span class="nv">$url</span><span class="p">,</span> <span class="nv">$post_type</span><span class="p">,</span> <span class="nv">$payload</span> <span class="o">=</span> <span class="kc">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// crm post code here</span>
        <span class="nv">$curl_url</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">=&gt;</span><span class="nf">curl</span><span class="p">(</span><span class="nv">$curl_url</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">function</span> <span class="n">curl</span><span class="p">(</span><span class="nv">$url</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// curl code here</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p><br /></p>

<h2 id="our-next-topic"><strong>Our Next Topic</strong></h2>
<p><br />
After I finish adding the class to the PHP code, I will add logging and any necessary try/catch for error handling and debugging. Then we will review the finalized PHP Class.</p>

    </div>
</div>


    <footer class="footer">
    <div class="container">
        <div class="row">
            <ul>
                <li>
                    <a href="mailto:eric.chrobak@gmail.com">
                        <i class="fa fa-envelope"></i>
                    </a>
                </li>
                <li>
                    <a href="https://github.com/epunx2">
                        <i class="fa fa-github"></i>
                    </a>
                </li>
                <li>
                    <a href="tel:312-513-8086">
                        <i class="fa fa-phone"></i>
                    </a>
                </li>
                <li>
                    <a href="https://www.linkedin.com/in/echrobak">
                        <i class="fa fa-linkedin"></i>
                    </a>
                </li>
            </ul>
            <p class="copyright text-muted">&copy; Eric Chrobak 2015-2025</p>
        </div>
    </div>
</footer>


</body>

</html>
